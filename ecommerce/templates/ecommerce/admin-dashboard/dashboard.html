{% extends 'ecommerce/base.html' %} {% load static %} {% block title %} Admin
Dashboard {% endblock %} {% block content %}
<style>
  /* General Styles */
  body {
    background: #f4f7fa;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  }
  h2,
  h4 {
    font-weight: 700;
    color: #2d3748;
    letter-spacing: -1px;
  }

  /* Info Card */
  .info-card {
    background: linear-gradient(90deg, #4361ee 80%, #ffd166 100%);
    color: #fff;
    border-radius: 16px;
    box-shadow: 0 2px 12px rgba(67, 97, 238, 0.09);
    padding: 2rem 1.5rem;
    margin-bottom: 2rem;
    text-align: center;
  }
  .info-card h3 {
    font-size: 2.2rem;
    font-weight: 800;
    margin-bottom: 0.5rem;
  }
  .info-card p {
    font-size: 1.1rem;
    margin-bottom: 0;
  }

  /* Cards */
  .card,
  .dashboard-form-section {
    border-radius: 16px;
    box-shadow: 0 2px 12px rgba(67, 97, 238, 0.08);
    background: #fff;
    padding: 1rem;
  }
  .card:hover {
    transform: translateY(-4px) scale(1.03);
    box-shadow: 0 8px 32px rgba(67, 97, 238, 0.13);
  }

  /* Table Styles */
  .table {
    background: #fff;
    border-radius: 12px;
    overflow: hidden;
    margin-bottom: 0;
    box-shadow: 0 2px 12px rgba(67, 97, 238, 0.04);
  }
  .table th {
    background: linear-gradient(90deg, #4361ee 80%, #ffd166 100%);
    color: #fff;
    font-weight: 600;
    border: none;
    font-size: 1rem;
  }
  .table td {
    vertical-align: middle;
    font-size: 0.98rem;
    color: #2d3748;
    border-top: 1px solid #f1f5ff;
  }
  .table-hover tbody tr:hover {
    background: #f1f5ff;
  }

  /* Badges */
  .badge {
    padding: 6px 14px;
    font-size: 0.92rem;
    border-radius: 8px;
    font-weight: 600;
  }
  .bg-success {
    background: #06d6a0;
    color: #fff;
  }
  .bg-danger {
    background: #ff6b6b;
    color: #fff;
  }
  .bg-primary {
    background: #4361ee;
    color: #fff;
  }
  .bg-secondary {
    background: #718096;
    color: #fff;
  }
  .bg-warning {
    background: #ffd166;
    color: #fff;
  }

  /* Forms */
  .dashboard-form-section .form-label {
    font-weight: 600;
    color: #2d3748;
  }
  .dashboard-form-section .form-control,
  .dashboard-form-section .form-select {
    border-radius: 8px;
    border: 1px solid #e2e8f0;
  }
  .dashboard-form-section .btn {
    font-weight: 700;
    border-radius: 8px;
    padding: 0.6rem 1.5rem;
  }

  /* Action Buttons */
  .action-btns {
    display: flex;
    gap: 8px;
    justify-content: center;
  }
  .btn-edit {
    background: #4361ee;
    color: #fff;
    border: none;
    border-radius: 6px;
    padding: 4px 12px;
    font-size: 0.95rem;
    transition: 0.2s;
  }
  .btn-edit:hover {
    background: #3a56d4;
    color: #fff;
  }
  .btn-delete {
    background: #ff6b6b;
    color: #fff;
    border: none;
    border-radius: 6px;
    padding: 4px 12px;
    font-size: 0.95rem;
    transition: 0.2s;
  }
  .btn-delete:hover {
    background: #e63946;
    color: #fff;
  }

  /* Responsive */
  @media (max-width: 991px) {
    .dashboard-form-section .col-md-4 {
      flex: 0 0 50%;
      max-width: 50%;
      margin-bottom: 1.5rem;
    }
  }
  @media (max-width: 768px) {
    .dashboard-form-section .col-md-4 {
      flex: 0 0 100%;
      max-width: 100%;
      margin-bottom: 1.5rem;
    }
    h2 {
      font-size: 2rem;
    }
    h4 {
      font-size: 1.2rem;
    }
  }
</style>

<div class="container py-5">
  <!-- Information Section -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="info-card">
        <h3>Welcome, Admin!</h3>
        <p>
          Total Customers: <b>{{ customers|length|default:"0" }}</b> | Products:
          <b>{{ products|length|default:"0" }}</b> | Feature Products:
          <b>{{ feature_products|length|default:"0" }}</b> | Orders:
          <b>{{ orders|length|default:"0" }}</b> | Payments:
          <b>{{ payments|length|default:"0" }}</b> | Categories:
          <b>{{ categories|length|default:"0" }}</b> | Carts:
          <b>{{ carts|length|default:"0" }}</b>
        </p>
      </div>
    </div>
  </div>

  <!-- Dashboard Forms -->
  <div class="row dashboard-form-section">
    <!-- Add Category -->
    <div class="col-md-4">
      <h4>Add New Category</h4>
      <form
        method="post"
        action="{% url 'admin_dashboard' %}"
        enctype="multipart/form-data"
      >
        {% csrf_token %}
        <div class="mb-3">
          <label for="category_name" class="form-label">Category Name</label>
          <input
            type="text"
            name="category_name"
            id="category_name"
            class="form-control"
            required
          />
        </div>
        <div class="mb-3">
          <label for="category_visible" class="form-label">Visible</label>
          <select
            name="category_visible"
            id="category_visible"
            class="form-select"
          >
            <option value="true" selected>Yes</option>
            <option value="false">No</option>
          </select>
        </div>
        <button type="submit" name="add_category" class="btn btn-success w-100">
          Add Category
        </button>
      </form>
    </div>

    <!-- Add Product -->
    <div class="col-md-4">
      <h4>Add New Product</h4>
      <form
        method="post"
        action="{% url 'admin_dashboard' %}"
        enctype="multipart/form-data"
      >
        {% csrf_token %}
        <div class="mb-3">
          <label for="product_name" class="form-label">Product Name</label>
          <input
            type="text"
            name="product_name"
            id="product_name"
            class="form-control"
            required
          />
        </div>
        <div class="mb-3">
          <label for="product_category" class="form-label">Category</label>
          <select
            name="product_category"
            id="product_category"
            class="form-select"
            required
          >
            <option value="" disabled selected>Select Category</option>
            {% for category in categories %}
            <option value="{{ category.category_id }}">
              {{ category.name }}
            </option>
            {% endfor %}
          </select>
        </div>
        <div class="mb-3">
          <label for="product_price" class="form-label">Price</label>
          <input
            type="number"
            name="product_price"
            id="product_price"
            class="form-control"
            step="0.01"
            min="0"
            required
          />
        </div>
        <div class="mb-3">
          <label for="product_stock" class="form-label">Stock</label>
          <input
            type="number"
            name="product_stock"
            id="product_stock"
            class="form-control"
            min="0"
            required
          />
        </div>
        <div class="mb-3">
          <label for="product_image" class="form-label">Image</label>
          <input
            type="file"
            name="product_image"
            id="product_image"
            class="form-control"
          />
        </div>
        <div class="mb-3">
          <label for="product_description" class="form-label"
            >Description</label
          >
          <textarea
            name="product_description"
            id="product_description"
            class="form-control"
            rows="2"
          ></textarea>
        </div>
        <button type="submit" name="add_product" class="btn btn-primary w-100">
          Add Product
        </button>
      </form>
    </div>

    <!-- Add Feature Product -->
    <div class="col-md-4">
      <h4>Add Feature Product</h4>
      <form
        method="post"
        action="{% url 'admin_dashboard' %}"
        enctype="multipart/form-data"
      >
        {% csrf_token %}
        <div class="mb-3">
          <label for="feature_name" class="form-label"
            >Feature Product Name</label
          >
          <input
            type="text"
            name="feature_name"
            id="feature_name"
            class="form-control"
            required
          />
        </div>
        <div class="mb-3">
          <label for="feature_category" class="form-label">Category</label>
          <select
            name="feature_category"
            id="feature_category"
            class="form-select"
            required
          >
            <option value="" disabled selected>Select Category</option>
            {% for category in categories %}
            <option value="{{ category.category_id }}">
              {{ category.name }}
            </option>
            {% endfor %}
          </select>
        </div>
        <div class="mb-3">
          <label for="feature_price" class="form-label">Price</label>
          <input
            type="number"
            name="feature_price"
            id="feature_price"
            class="form-control"
            step="0.01"
            min="0"
            required
          />
        </div>
        <div class="mb-3">
          <label for="feature_discount" class="form-label">Discount</label>
          <input
            type="number"
            name="feature_discount"
            id="feature_discount"
            class="form-control"
            step="0.01"
            min="0"
          />
        </div>
        <div class="mb-3">
          <label for="feature_stock" class="form-label">Stock</label>
          <input
            type="number"
            name="feature_stock"
            id="feature_stock"
            class="form-control"
            min="0"
            required
          />
        </div>
        <div class="mb-3">
          <label for="feature_image" class="form-label">Image</label>
          <input
            type="file"
            name="feature_image"
            id="feature_image"
            class="form-control"
          />
        </div>
        <div class="mb-3">
          <label for="feature_description" class="form-label"
            >Description</label
          >
          <textarea
            name="feature_description"
            id="feature_description"
            class="form-control"
            rows="2"
          ></textarea>
        </div>
        <button
          type="submit"
          name="add_feature_product"
          class="btn btn-warning w-100"
        >
          Add Feature Product
        </button>
      </form>
    </div>
  </div>

  <!-- Data Tables Section -->
  {% comment %} Customers Table {% endcomment %}
  <h4>All Customers</h4>
  <div class="table-responsive mb-5">
    <table class="table table-bordered table-hover align-middle">
      <thead class="table-light">
        <tr>
          <th>Customer ID</th>
          <th>Name</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Address</th>
          <th>Is Staff</th>
        </tr>
      </thead>
      <tbody>
        {% for customer in customers %}
        <tr>
          <td>{{ customer.customer_id }}</td>
          <td>{{ customer.name }}</td>
          <td>{{ customer.email }}</td>
          <td>{{ customer.phone }}</td>
          <td>{{ customer.address }}</td>
          <td>
            {% if customer.is_staff %}
            <span class="badge bg-primary">Admin</span>
            {% else %}
            <span class="badge bg-secondary">User</span>
            {% endif %}
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="text-center">No customers found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {% comment %} Repeat similar structure for Products, Feature Products, Orders,
  Payments, Categories, Carts {% endcomment %}

  <!-- Products Table -->
  <h4>All Products</h4>
  <div class="table-responsive mb-5">
    <table class="table table-bordered table-hover align-middle">
      <thead class="table-light">
        <tr>
          <th>Product ID</th>
          <th>Name</th>
          <th>Category</th>
          <th>Price</th>
          <th>Stock</th>
          <th>Available</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for product in products %}
        <tr>
          <td>{{ product.product_id }}</td>
          <td>{{ product.name }}</td>
          <td>{{ product.category.name }}</td>
          <td>${{ product.price|floatformat:2 }}</td>
          <td>{{ product.stock }}</td>
          <td>
            {% if product.is_available %}
            <span class="badge bg-success">Yes</span>
            {% else %}
            <span class="badge bg-danger">No</span>
            {% endif %}
          </td>
          <td>
            <div class="action-btns">
              <a
                href="{% url 'admin_edit_product' product.product_id %}"
                class="btn btn-edit btn-sm"
              >
                <i class="fas fa-edit"></i> Edit
              </a>
              <form
                method="post"
                action="{% url 'admin_delete_product' product.product_id %}"
                style="display: inline"
              >
                {% csrf_token %}
                <button
                  type="submit"
                  class="btn btn-delete btn-sm"
                  onclick="return confirm('Are you sure you want to delete this product?');"
                >
                  <i class="fas fa-trash"></i> Delete
                </button>
              </form>
            </div>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="7" class="text-center">No products found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Feature Products Table -->
  <h4>All Feature Products</h4>
  <div class="table-responsive mb-5">
    <table class="table table-bordered table-hover align-middle">
      <thead class="table-light">
        <tr>
          <th>Feature Product ID</th>
          <th>Name</th>
          <th>Category</th>
          <th>Price</th>
          <th>Discount</th>
          <th>Stock</th>
          <th>Available</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for product in feature_products %}
        <tr>
          <td>{{ product.Feature_Product_id }}</td>
          <td>{{ product.name }}</td>
          <td>{{ product.category.name }}</td>
          <td>${{ product.price|floatformat:2 }}</td>
          <td>
            {% if product.discount and product.discount > 0 %}
            <span class="badge bg-warning"
              >${{ product.discount|floatformat:2 }}</span
            >
            {% else %} - {% endif %}
          </td>
          <td>{{ product.stock }}</td>
          <td>
            {% if product.is_available %}
            <span class="badge bg-success">Yes</span>
            {% else %}
            <span class="badge bg-danger">No</span>
            {% endif %}
          </td>
          <td>
            <div class="action-btns">
              <a
                href="{% url 'admin_edit_feature_product' product.Feature_Product_id %}"
                class="btn btn-edit btn-sm"
              >
                <i class="fas fa-edit"></i> Edit
              </a>
              <form
                method="post"
                action="{% url 'admin_delete_feature_product' product.Feature_Product_id %}"
                style="display: inline"
              >
                {% csrf_token %}
                <button
                  type="submit"
                  class="btn btn-delete btn-sm"
                  onclick="return confirm('Are you sure you want to delete this feature product?');"
                >
                  <i class="fas fa-trash"></i> Delete
                </button>
              </form>
            </div>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="8" class="text-center">No feature products found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <!-- ...existing code... -->
</div>
{% endblock %}
